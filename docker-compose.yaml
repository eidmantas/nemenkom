version: '3.8'

services:
  nemenkom:
    build: .
    ports:
      - "3333:3333"
    volumes:
      - ./database:/app/database
      - ./web:/app/web
      - ./secrets:/app/secrets:ro  # Mount secrets as read-only
    environment:
      - FLASK_ENV=production
      - TZ=Europe/Vilnius
    restart: unless-stopped

  scraper:
    build:
      context: .
      dockerfile: Dockerfile.scraper
    volumes:
      - ./database:/app/database
      - ./secrets:/app/secrets:ro  # Mount secrets as read-only
    environment:
      - TZ=Europe/Vilnius
      - PYTHONUNBUFFERED=1
    restart: unless-stopped

